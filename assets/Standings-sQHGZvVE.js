import{c as x,j as s,L as l,f as j,u,r as g,i as v,a as N,b as h,w as p,H as f}from"./index-BBUaGlRn.js";import{u as b}from"./index-BR725ydH.js";import{L as w}from"./LoadingMini-LMd164mA.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D=x("ChevronDown",S);function C({results:a}){const n=window.innerWidth<=768;return s.jsxs("table",{className:"standings-list standings-drivers-list",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"standings-drivers-list-header",children:[s.jsx("th",{className:"standings-drivers-list-position",children:" # "}),s.jsx("th",{className:"standings-drivers-list-driver",children:" Driver "}),s.jsx("th",{className:"standings-drivers-list-constructor",children:" Constructor "}),s.jsx("th",{className:"standings-drivers-list-points",children:" Points "})]},"header")}),s.jsx("tbody",{children:a.map((e,i)=>s.jsxs("tr",{className:"fade-in",children:[s.jsx("td",{className:"standings-drivers-list-position",children:e.positionText}),s.jsx("td",{className:"standings-drivers-list-driver",children:s.jsxs(l,{to:`/drivers?id=${e.Driver.driverId}`,children:[n?`${e.Driver.givenName[0]}.`:e.Driver.givenName,"Â ",s.jsx("span",{className:"standings-drivers-list-driver-familyName",children:e.Driver.familyName})]})}),s.jsx("td",{className:"standings-drivers-list-constructor",children:s.jsx(l,{to:`/constructor?id=${e.Constructors[0].constructorId}`,children:e.Constructors[0].name})}),s.jsx("td",{className:"standings-drivers-list-points",children:e.points})]},i))})]})}function $({results:a}){return s.jsxs("table",{className:"standings-list standings-teams-list",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"standings-teams-list-header",children:[s.jsx("th",{className:"standings-teams-list-position",children:" # "}),s.jsx("th",{className:"standings-teams-list-constructor",children:" Constructor "}),s.jsx("th",{className:"standings-teams-list-wins",children:" Wins "}),s.jsx("th",{className:"standings-teams-list-points",children:" Points "})]},"header")}),s.jsx("tbody",{children:a.map((n,e)=>s.jsxs("tr",{className:"fade-in",children:[s.jsx("td",{className:"standings-teams-list-position",children:n.positionText}),s.jsx("td",{className:"standings-teams-list-constructor",children:s.jsx(l,{to:`/constructor?id=${n.Constructor.constructorId}`,children:n.Constructor.name})}),s.jsx("td",{className:"standings-teams-list-wins",children:n.wins}),s.jsx("td",{className:"standings-teams-list-points",children:n.points})]},e))})]})}function L({season:a,mode:n}){let e=new Date().getFullYear();if(a<1950||a>e)return s.jsx("div",{className:"standings-loading-error",children:"No data for this season."});if(a<1958&&n==="constructorstandings")return s.jsx("div",{className:"standings-loading-error",children:"The Constructors Championship was not awarded until 1958"});const{data:i,error:t,isLoading:d}=b(`https://api.jolpi.ca/ergast/f1/${a}/${n}/?limit=100`,j);if(t)return s.jsx("div",{className:"standings-loading-error",children:"Failed to load."});if(d)return s.jsx("div",{className:"standings-loading",children:s.jsx(w,{})});let r=[];try{n==="driverstandings"?r=i.MRData.StandingsTable.StandingsLists[0].DriverStandings:r=i.MRData.StandingsTable.StandingsLists[0].ConstructorStandings}catch{return s.jsx("div",{className:"standings-loading-error",children:"No data for this season."})}return n==="driverstandings"?s.jsx(C,{results:r}):s.jsx($,{results:r})}function y({selectedSeason:a}){const n=new Date().getFullYear(),e=u();let i=Array.from({length:n-1950+1},(t,d)=>n-d);return g.useEffect(()=>{const t=document.querySelector(`[data-season="${a}"]`);t&&t.scrollIntoView({block:"center"})},[a]),s.jsx("div",{className:"standings-table-dropdown-content",children:s.jsx("ol",{className:"standings-table-dropdown-list",children:i.map(t=>s.jsx("li",{"data-season":t,className:"standings-table-dropdown-year",onClick:()=>e(`/standings?season=${t}`),children:v()?t:`Season ${t}`},t))})})}function M(){let a=new Date().getFullYear(),n=a;const e=N(),i=new URLSearchParams(e.search).get("season");let t=[];i&&(t=i.split("_")),t[0]&&(n=t[0]);let[d,r]=h(!0),[c,o]=h(!1);g.useEffect(()=>{t[1]==="c"&&r()},[]);let m=p().width<=768;return s.jsxs(s.Fragment,{children:[s.jsxs(f,{children:[s.jsxs("title",{children:["F1 Statistics - ",n.toString()," Standings"]}),s.jsx("meta",{name:"description",content:`F1 Stats - Drivers and constructors tandings from 1950 to ${a}}`})]}),s.jsxs("div",{className:"standings-container",children:[s.jsx("div",{className:"standings-title",children:s.jsx("h3",{children:"F1 Standings"})}),s.jsxs("div",{className:"standings-table",children:[s.jsxs("div",{className:"standings-table-header",children:[s.jsxs("div",{className:"standings-table-header-left",children:[s.jsxs("div",{className:"standings-table-header-title",children:[" ",s.jsxs("h6",{children:[" Season ",n," Standings "]})]}),s.jsxs("div",{className:"standings-table-header-mode-buttons",children:[s.jsx("div",{className:`standings-table-header-mode-drivers-button ${d===!0?"standings-table-header-mode-button-active":""}`,onClick:r,children:" Drivers "}),s.jsx("div",{className:`standings-table-header-mode-teams-button ${d===!1?"standings-table-header-mode-button-active":""}`,onClick:r,children:" Teams "})]})]}),s.jsx("div",{className:"standings-table-header-right",children:s.jsxs("div",{className:"standings-table-dropdown-container",children:[s.jsxs("div",{className:"standings-table-dropdown-current",onClick:o,children:[s.jsx("div",{className:"standings-table-dropdown-current-text",children:s.jsxs("span",{children:[m?n:`Season ${n}`," "]})}),s.jsx("div",{className:"standings-table-dropdown-current-expand-icon",children:s.jsx(D,{size:"16"})})]}),s.jsx("div",{className:"standings-table-dropdown-box",onClick:o,children:c&&s.jsx(y,{selectedSeason:n})})]})})]}),s.jsx(L,{season:n.toString(),mode:d?"driverstandings":"constructorstandings"})]})]})]})}export{M as default};
