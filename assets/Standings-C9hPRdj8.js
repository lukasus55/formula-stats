import{j as s,c as l,f as c,b as o,u as h,r as g,H as m}from"./index-ukMYrEms.js";import{u as x}from"./index-79_pYNkC.js";import{L as j}from"./LoadingMini-D0vVEpd7.js";import{S as u}from"./SeasonsDropdown-BwrC_QhP.js";function N({results:i}){const t=window.innerWidth<=768;return s.jsxs("table",{className:"standings-list standings-drivers-list",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"standings-drivers-list-header",children:[s.jsx("th",{className:"standings-drivers-list-position",children:" # "}),s.jsx("th",{className:"standings-drivers-list-driver",children:" Driver "}),s.jsx("th",{className:"standings-drivers-list-constructor",children:" Constructor "}),s.jsx("th",{className:"standings-drivers-list-points",children:" Points "})]},"header")}),s.jsx("tbody",{children:i.map((n,a)=>s.jsxs("tr",{className:"fade-in",children:[s.jsx("td",{className:"standings-drivers-list-position",children:n.positionText}),s.jsx("td",{className:"standings-drivers-list-driver",children:s.jsxs(l,{to:`/drivers?id=${n.Driver.driverId}`,children:[t?`${n.Driver.givenName[0]}.`:n.Driver.givenName,"Â ",s.jsx("span",{className:"standings-drivers-list-driver-familyName",children:n.Driver.familyName})]})}),s.jsx("td",{className:"standings-drivers-list-constructor",children:s.jsx(l,{to:`/constructor?id=${n.Constructors[0].constructorId}`,children:n.Constructors[0].name})}),s.jsx("td",{className:"standings-drivers-list-points",children:n.points})]},a))})]})}function v({results:i}){return s.jsxs("table",{className:"standings-list standings-teams-list",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"standings-teams-list-header",children:[s.jsx("th",{className:"standings-teams-list-position",children:" # "}),s.jsx("th",{className:"standings-teams-list-constructor",children:" Constructor "}),s.jsx("th",{className:"standings-teams-list-wins",children:" Wins "}),s.jsx("th",{className:"standings-teams-list-points",children:" Points "})]},"header")}),s.jsx("tbody",{children:i.map((t,n)=>s.jsxs("tr",{className:"fade-in",children:[s.jsx("td",{className:"standings-teams-list-position",children:t.positionText}),s.jsx("td",{className:"standings-teams-list-constructor",children:s.jsx(l,{to:`/constructor?id=${t.Constructor.constructorId}`,children:t.Constructor.name})}),s.jsx("td",{className:"standings-teams-list-wins",children:t.wins}),s.jsx("td",{className:"standings-teams-list-points",children:t.points})]},n))})]})}function f({season:i,mode:t}){let n=new Date().getFullYear();if(i<1950||i>n)return s.jsx("div",{className:"standings-loading-error",children:"No data for this season."});if(i<1958&&t==="constructorstandings")return s.jsx("div",{className:"standings-loading-error",children:"The Constructors Championship was not awarded until 1958"});const{data:a,error:r,isLoading:d}=x(`https://api.jolpi.ca/ergast/f1/${i}/${t}/?limit=100`,c);if(r)return s.jsx("div",{className:"standings-loading-error",children:"Failed to load."});if(d)return s.jsx("div",{className:"standings-loading",children:s.jsx(j,{})});let e=[];try{t==="driverstandings"?e=a.MRData.StandingsTable.StandingsLists[0].DriverStandings:e=a.MRData.StandingsTable.StandingsLists[0].ConstructorStandings}catch{return s.jsx("div",{className:"standings-loading-error",children:"No data for this season."})}return t==="driverstandings"?s.jsx(N,{results:e}):s.jsx(v,{results:e})}function w(){let i=new Date().getFullYear(),t=i;const n=o(),a=new URLSearchParams(n.search).get("season");let r=[];a&&(r=a.split("_")),r[0]&&(t=r[0]);let[d,e]=h(!0);return g.useEffect(()=>{r[1]==="c"&&e()},[]),s.jsxs(s.Fragment,{children:[s.jsxs(m,{children:[s.jsxs("title",{children:["F1 Statistics - ",t.toString()," Standings"]}),s.jsx("meta",{name:"description",content:`F1 Stats - Drivers and constructors tandings from 1950 to ${i}}`})]}),s.jsxs("div",{className:"standings-container",children:[s.jsx("div",{className:"standings-title",children:s.jsx("h3",{children:"F1 Standings"})}),s.jsxs("div",{className:"standings-table",children:[s.jsxs("div",{className:"standings-table-header",children:[s.jsxs("div",{className:"standings-table-header-left",children:[s.jsxs("div",{className:"standings-table-header-title",children:[" ",s.jsxs("h6",{children:[" Season ",t," Standings "]})]}),s.jsxs("div",{className:"standings-table-header-mode-buttons",children:[s.jsx("div",{className:`main-toggle-button ${d===!0?"main-toggle-button-active":""}`,onClick:e,children:" Drivers "}),s.jsx("div",{className:`main-toggle-button ${d===!1?"main-toggle-button-active":""}`,onClick:e,children:" Teams "})]})]}),s.jsx("div",{className:"standings-table-header-right",children:s.jsx(u,{selectedSeason:t})})]}),s.jsx(f,{season:t.toString(),mode:d?"driverstandings":"constructorstandings"})]})]})]})}export{w as default};
